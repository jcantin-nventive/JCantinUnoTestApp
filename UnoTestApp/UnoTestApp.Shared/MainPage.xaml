<Page x:Class="UnoTestApp.MainPage"
	  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	  xmlns:c="using:Parkland.Views.Controls"
	  xmlns:af="using:Parkland.Views.AppFramework"
	  xmlns:b="using:Parkland.Views.Behaviors"
	  xmlns:cv="using:Parkland.Views.Converters"
	  xmlns:map="using:Umbrella.Location.DynamicMap"
	  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	  xmlns:xamarin="http:///umbrella/ui/xamarin"
	  xmlns:win="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	  xmlns:ios="http:///umbrella/ui/ios"
	  xmlns:android="http://nventive.com/android"
	  xmlns:u="using:Umbrella.View.Controls"
	  xmlns:uc="using:Umbrella.View.Controls"
	  xmlns:ue="using:Umbrella.View.Extensions"
	  xmlns:ucv="using:Umbrella.View.Converters"
	  xmlns:ub="using:Umbrella.View.Extensions"
	  xmlns:up="using:Umbrella.View.Controls"
	  xmlns:toolkit="using:Uno.UI.Toolkit"
	  xmlns:uloc="http://nventive.com/localization/1.0"
	  xmlns:not_ios="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	  mc:Ignorable="uloc xamarin ios android">

	<Grid Background="{StaticResource Color04Brush}">

		<Grid.RowDefinitions>
			<RowDefinition Height="*" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>

		<VisualStateManager.VisualStateGroups>
			<VisualStateGroup x:Name="LocationStates">
				<VisualState x:Name="Map" />
				<VisualState x:Name="List">
					<win:VisualState.Setters>
						<Setter Target="MapButton.Visibility"
								Value="Visible" />
						<Setter Target="ListButton.Visibility"
								Value="Collapsed" />
						<Setter Target="GrayBackground.Opacity"
								Value="1" />
						<Setter Target="StoresList.Opacity"
								Value="1" />
						<Setter Target="CurrentLocationButton.Opacity"
								Value="0" />
						<Setter Target="CurrentLocationButton.IsHitTestVisible"
								Value="False" />
						<Setter Target="StoresList.(UIElement.RenderTransform).(TranslateTransform.Y)"
								Value="0" />
						<Setter Target="SearchResults.Visibility"
								Value="Collapsed" />
						<Setter Target="SearchResults.Opacity"
								Value="0" />
						<Setter Target="SearchResults.IsHitTestVisible"
								Value="False" />
						<Setter Target="FiltersButton.(UIElement.RenderTransform).(TranslateTransform.X)"
								Value="46" />
					</win:VisualState.Setters>
				</VisualState>

				<VisualState x:Name="Search">
					<win:VisualState.Setters>
						<Setter Target="MapButton.Visibility"
								Value="Collapsed" />
						<Setter Target="CloseButton.Visibility"
								Value="Visible" />
						<Setter Target="ListButton.Visibility"
								Value="Collapsed" />
						<Setter Target="GrayBackground.Opacity"
								Value="1" />
						<Setter Target="SearchResults.Visibility"
								Value="Visible" />
						<Setter Target="SearchResults.IsHitTestVisible"
								Value="True" />
						<Setter Target="SearchResults.Opacity"
								Value="1" />
						<Setter Target="FiltersButton.Opacity"
								Value="0" />
						<Setter Target="CurrentLocationButton.Opacity"
								Value="0" />
						<Setter Target="CurrentLocationButton.IsHitTestVisible"
								Value="False" />
					</win:VisualState.Setters>
				</VisualState>

				<VisualStateGroup.Transitions>
					<VisualTransition From="Map"
									  To="List">

						<!-- IshitTestVisible for MapButton and ListButton: do not remove, fixes for https://nventive.visualstudio.com/Umbrella/_workitems/edit/149367 -->
						<Storyboard>
							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MapButton"
														   Storyboard.TargetProperty="Visibility">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="Visible" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MapButton"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="True" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ListButton"
														   Storyboard.TargetProperty="Visibility">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="Collapsed" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ListButton"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="False" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="GrayBackground"
											 Storyboard.TargetProperty="Opacity"
											 Duration="0:0:0.5"
											 To="1" />

							<DoubleAnimation Storyboard.TargetName="StoresList"
											 Storyboard.TargetProperty="Opacity"
											 Duration="0:0:0"
											 To="1" />

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="StoresList"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="True" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="StoresList"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
											 BeginTime="0:0:0.2"
											 Duration="0:0:0.3"
											 To="0">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>

							<DoubleAnimation Storyboard.TargetName="FiltersButton"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
											 BeginTime="0:0:0.1"
											 Duration="0:0:0.3"
											 To="46">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseInOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>

							<DoubleAnimation Storyboard.TargetName="CurrentLocationButton"
											 Storyboard.TargetProperty="Opacity"
											 Duration="0:0:0.3"
											 To="0" />

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="CurrentLocationButton"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="False" />
							</ObjectAnimationUsingKeyFrames>
						</Storyboard>
					</VisualTransition>

					<VisualTransition From="Map"
									  To="Search">

						<!-- IshitTestVisible for MapButton, ListButton CloseButton: do not remove, fixes for https://nventive.visualstudio.com/Umbrella/_workitems/edit/149367 -->
						<Storyboard>
							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="SearchResults"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="True" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="SearchResults"
											 Storyboard.TargetProperty="Opacity"
											 BeginTime="0:0:0.2"
											 Duration="0:0:0.3"
											 To="1" />

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="CloseButton"
														   Storyboard.TargetProperty="Visibility">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="Visible" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="CloseButton"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="True" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ListButton"
														   Storyboard.TargetProperty="Visibility">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="Collapsed" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ListButton"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="False" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MapButton"
														   Storyboard.TargetProperty="Visibility">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="Collapsed" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MapButton"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="False" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="GrayBackground"
											 Storyboard.TargetProperty="Opacity"
											 Duration="0:0:0.5"
											 To="1" />

							<DoubleAnimation Storyboard.TargetName="FiltersButton"
											 Storyboard.TargetProperty="Opacity"
											 Duration="0:0:0.3"
											 BeginTime="0:0:0.2"
											 To="0" />

							<DoubleAnimation Storyboard.TargetName="CurrentLocationButton"
											 Storyboard.TargetProperty="Opacity"
											 Duration="0:0:0.3"
											 BeginTime="0:0:0.2"
											 To="0" />

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="CurrentLocationButton"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="False" />
							</ObjectAnimationUsingKeyFrames>
						</Storyboard>
					</VisualTransition>

					<VisualTransition From="List"
									  To="Map">

						<!-- IshitTestVisible for MapButton and ListButton: do not remove, fixes for https://nventive.visualstudio.com/Umbrella/_workitems/edit/149367 -->
						<Storyboard>
							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MapButton"
														   Storyboard.TargetProperty="Visibility">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="Collapsed" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MapButton"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="False" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ListButton"
														   Storyboard.TargetProperty="Visibility">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="Visible" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ListButton"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="True" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="GrayBackground"
											 Storyboard.TargetProperty="Opacity"
											 BeginTime="0:0:0.2"
											 Duration="0:0:0.3"
											 To="0" />

							<DoubleAnimation Storyboard.TargetName="StoresList"
											 Storyboard.TargetProperty="Opacity"
											 Duration="0:0:0.3"
											 To="0" />

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="StoresList"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="False" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="StoresList"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
											 Duration="0:0:0.3"
											 To="850">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseIn" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>

							<DoubleAnimation Storyboard.TargetName="CurrentLocationButton"
											 Storyboard.TargetProperty="Opacity"
											 Duration="0:0:0.3"
											 BeginTime="0:0:0.1"
											 To="1" />

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="CurrentLocationButton"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="True" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="FiltersButton"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
											 Duration="0:0:0.3"
											 To="0">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseInOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>
						</Storyboard>
					</VisualTransition>

					<VisualTransition From="Search"
									  To="Map">

						<!-- IshitTestVisible for MapButton, ListButton CloseButton: do not remove, fixes for https://nventive.visualstudio.com/Umbrella/_workitems/edit/149367 -->
						<Storyboard>
							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="SearchResults"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="False" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="SearchResults"
											 Storyboard.TargetProperty="Opacity"
											 Duration="0:0:0.3"
											 To="0" />

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="CloseButton"
														   Storyboard.TargetProperty="Visibility">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="Collapsed" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="CloseButton"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="False" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ListButton"
														   Storyboard.TargetProperty="Visibility">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="Visible" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ListButton"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="True" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MapButton"
														   Storyboard.TargetProperty="Visibility">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="Collapsed" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MapButton"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="False" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="GrayBackground"
											 Storyboard.TargetProperty="Opacity"
											 BeginTime="0:0:0.2"
											 Duration="0:0:0.3"
											 To="0" />

							<DoubleAnimation Storyboard.TargetName="CurrentLocationButton"
											 Storyboard.TargetProperty="Opacity"
											 Duration="0:0:0.3"
											 BeginTime="0:0:0.2"
											 To="1" />

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="CurrentLocationButton"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="True" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="FiltersButton"
											 Storyboard.TargetProperty="Opacity"
											 Duration="0:0:0.3"
											 BeginTime="0:0:0.2"
											 To="1" />

							<DoubleAnimation Storyboard.TargetName="FiltersButton"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
											 Duration="0:0:0.3"
											 BeginTime="0:0:0.2"
											 To="0">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseInOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>
						</Storyboard>
					</VisualTransition>

					<VisualTransition From="List"
									  To="Search">

						<!-- IshitTestVisible for MapButton, ListButton CloseButton: do not remove, fixes for https://nventive.visualstudio.com/Umbrella/_workitems/edit/149367 -->
						<Storyboard>
							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="SearchResults"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="True" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="SearchResults"
											 Storyboard.TargetProperty="Opacity"
											 BeginTime="0:0:0.2"
											 Duration="0:0:0.3"
											 To="1" />

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="CloseButton"
														   Storyboard.TargetProperty="Visibility">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="Visible" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="CloseButton"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="True" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ListButton"
														   Storyboard.TargetProperty="Visibility">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="Collapsed" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ListButton"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="False" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MapButton"
														   Storyboard.TargetProperty="Visibility">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="Collapsed" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MapButton"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="False" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="GrayBackground"
											 Storyboard.TargetProperty="Opacity"
											 Duration="0:0:0"
											 To="1" />

							<DoubleAnimation Storyboard.TargetName="StoresList"
											 Storyboard.TargetProperty="Opacity"
											 Duration="0:0:0.3"
											 To="0" />

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="StoresList"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="False" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="StoresList"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
											 Duration="0:0:0.3"
											 BeginTime="0:0:0.2"
											 To="0">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>

							<DoubleAnimation Storyboard.TargetName="FiltersButton"
											 Storyboard.TargetProperty="Opacity"
											 Duration="0:0:0.3"
											 To="0" />

							<DoubleAnimation Storyboard.TargetName="FiltersButton"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
											 Duration="0:0:0"
											 To="46">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseInOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>
						</Storyboard>
					</VisualTransition>

					<VisualTransition From="Search"
									  To="List">

						<!-- IshitTestVisible for MapButton, ListButton CloseButton: do not remove, fixes for https://nventive.visualstudio.com/Umbrella/_workitems/edit/149367 -->
						<Storyboard>
							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="SearchResults"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="False" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="SearchResults"
											 Storyboard.TargetProperty="Opacity"
											 Duration="0:0:0.5"
											 To="0" />

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="CloseButton"
														   Storyboard.TargetProperty="Visibility">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="Collapsed" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="CloseButton"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="False" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ListButton"
														   Storyboard.TargetProperty="Visibility">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="Collapsed" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ListButton"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="False" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MapButton"
														   Storyboard.TargetProperty="Visibility">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="Visible" />
							</ObjectAnimationUsingKeyFrames>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="MapButton"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="True" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="GrayBackground"
											 Storyboard.TargetProperty="Opacity"
											 Duration="0:0:0"
											 To="1" />

							<DoubleAnimation Storyboard.TargetName="StoresList"
											 Storyboard.TargetProperty="Opacity"
											 BeginTime="0:0:0.2"
											 Duration="0:0:0.3"
											 To="1" />

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="StoresList"
														   Storyboard.TargetProperty="IsHitTestVisible">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="True" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="StoresList"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
											 Duration="0:0:0"
											 To="0">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>

							<DoubleAnimation Storyboard.TargetName="FiltersButton"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
											 Duration="0:0:0"
											 To="46">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseInOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>

							<DoubleAnimation Storyboard.TargetName="FiltersButton"
											 Storyboard.TargetProperty="Opacity"
											 BeginTime="0:0:0.2"
											 Duration="0:0:0.3"
											 To="1" />
						</Storyboard>
					</VisualTransition>
				</VisualStateGroup.Transitions>
			</VisualStateGroup>

			<VisualStateGroup x:Name="BannerStates">
				<VisualState x:Name="None" />

				<VisualState x:Name="NoResultsOrError">
					<win:VisualState.Setters>
						<Setter Target="NoResultsOrErrorBanner.Opacity"
								Value="1" />
						<Setter Target="StoreSummaryBanner.Opacity"
								Value="0" />
						<Setter Target="NoResultsOrErrorBanner.(UIElement.RenderTransform).(TranslateTransform.Y)"
								Value="-53" />
						<Setter Target="BottomButtonsPanel.(UIElement.RenderTransform).(TranslateTransform.Y)"
								Value="-53" />
					</win:VisualState.Setters>
				</VisualState>

				<VisualState x:Name="StoreSummary">
					<win:VisualState.Setters>
						<Setter Target="StoreSummaryBanner.Opacity"
								Value="1" />
						<Setter Target="NoResultsOrErrorBanner.Opacity"
								Value="0" />
						<Setter Target="StoreSummaryBanner.(UIElement.RenderTransform).(TranslateTransform.Y)"
								Value="-53" />
						<Setter Target="BottomButtonsPanel.(UIElement.RenderTransform).(TranslateTransform.Y)"
								Value="-72" />
					</win:VisualState.Setters>
				</VisualState>

				<VisualStateGroup.Transitions>
					<VisualTransition From="None"
									  To="NoResultsOrError">
						<Storyboard>
							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="NoResultsOrErrorBanner"
														   Storyboard.TargetProperty="Opacity">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="1" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="NoResultsOrErrorBanner"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
											 Duration="0:0:0.5"
											 To="-53">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseInOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>

							<DoubleAnimation Storyboard.TargetName="BottomButtonsPanel"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
											 Duration="0:0:0.5"
											 To="-53">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseInOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>
						</Storyboard>
					</VisualTransition>

					<VisualTransition From="None"
									  To="StoreSummary">
						<Storyboard>
							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="StoreSummaryBanner"
														   Storyboard.TargetProperty="Opacity">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="1" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="StoreSummaryBanner"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
											 Duration="0:0:0.5"
											 To="-53">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseInOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>

							<DoubleAnimation Storyboard.TargetName="BottomButtonsPanel"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
											 Duration="0:0:0.5"
											 To="-72">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseInOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>
						</Storyboard>
					</VisualTransition>

					<VisualTransition From="StoreSummary"
									  To="None">
						<Storyboard>
							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="StoreSummaryBanner"
														   Storyboard.TargetProperty="Opacity">
								<DiscreteObjectKeyFrame KeyTime="0:0:0.5"
														Value="0" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="StoreSummaryBanner"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
											 Duration="0:0:0.5"
											 To="19">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseInOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>

							<DoubleAnimation Storyboard.TargetName="BottomButtonsPanel"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
											 Duration="0:0:0.5"
											 To="0">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseInOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>
						</Storyboard>
					</VisualTransition>

					<VisualTransition From="NoResultsOrError"
									  To="None">
						<Storyboard>
							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="NoResultsOrErrorBanner"
														   Storyboard.TargetProperty="Opacity">
								<DiscreteObjectKeyFrame KeyTime="0:0:0.5"
														Value="0" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="NoResultsOrErrorBanner"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
											 Duration="0:0:0.5"
											 To="0">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseInOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>

							<DoubleAnimation Storyboard.TargetName="BottomButtonsPanel"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
											 Duration="0:0:0.5"
											 To="0">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseInOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>
						</Storyboard>
					</VisualTransition>

					<VisualTransition From="StoreSummary"
									  To="NoResultsOrError">
						<Storyboard>
							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="StoreSummaryBanner"
														   Storyboard.TargetProperty="Opacity">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="1" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="StoreSummaryBanner"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
											 Duration="0:0:0.5"
											 To="19">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseInOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>

							<DoubleAnimation Storyboard.TargetName="BottomButtonsPanel"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
											 Duration="0:0:0.5"
											 To="-53">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseInOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="NoResultsOrErrorBanner"
														   Storyboard.TargetProperty="Opacity">
								<DiscreteObjectKeyFrame KeyTime="0:0:0.5"
														Value="1" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="NoResultsOrErrorBanner"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
											 Duration="0:0:0.5"
											 To="-53">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseInOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>
						</Storyboard>
					</VisualTransition>

					<VisualTransition From="NoResultsOrError"
									  To="StoreSummary">
						<Storyboard>
							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="NoResultsOrErrorBanner"
														   Storyboard.TargetProperty="Opacity">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="1" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="NoResultsOrErrorBanner"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
											 Duration="0:0:0.5"
											 To="0">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseInOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>

							<ObjectAnimationUsingKeyFrames Storyboard.TargetName="StoreSummaryBanner"
														   Storyboard.TargetProperty="Opacity">
								<DiscreteObjectKeyFrame KeyTime="0:0:0"
														Value="1" />
							</ObjectAnimationUsingKeyFrames>

							<DoubleAnimation Storyboard.TargetName="StoreSummaryBanner"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
											 Duration="0:0:0.5"
											 From="-34"
											 To="-53">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseInOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>

							<DoubleAnimation Storyboard.TargetName="BottomButtonsPanel"
											 Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
											 Duration="0:0:0.5"
											 From="-53"
											 To="-72">
								<DoubleAnimation.EasingFunction>
									<QuadraticEase EasingMode="EaseInOut" />
								</DoubleAnimation.EasingFunction>
							</DoubleAnimation>
						</Storyboard>
					</VisualTransition>
				</VisualStateGroup.Transitions>
			</VisualStateGroup>
		</VisualStateManager.VisualStateGroups>

		<Grid Grid.Row="0">
			<Grid.RowDefinitions>
				<RowDefinition Height="*" />
				<RowDefinition Height="Auto" />
			</Grid.RowDefinitions>

			<!-- Map -->
			<af:WaitControl Style="{StaticResource BackgroundWaitingControlStyle}"
							ApplyTemplatePriority="Normal"
							InnerViewPriority="Normal"
							DelayAfterDataContext="0:0:0.1"
							DelayAfterLoad="0:0:0.1"
							b:WaitControlBehavior.IsForceUnloaded="{Binding [IsForceUnloaded]}"
							Grid.RowSpan="2">
				<DataTemplate>

					<!-- win MapControl -->
					<win:Grid>
						<map:MapControl ViewModel="{Binding}"
										AutolocateButtonVisibility="Collapsed"
										CompassButtonVisibility="Collapsed"
										SelectedPushpinIcon="ms-appx:///Assets/Pin_Select.png"
										PushpinIcon="ms-appx:///Assets/Pin.png"
										PushpinIconsPositionOrigin="0.5,1"
										SelectionMode="Single"
										HorizontalAlignment="Stretch"
										VerticalAlignment="Stretch" />
					</win:Grid>

					<!-- For iOS and Android, we use a custom behavior to set the pushpins -->
					<xamarin:Grid>
						<map:MapControl ViewModel="{Binding}"
										AutolocateButtonVisibility="Collapsed"
										CompassButtonVisibility="Collapsed"
										b:CustomMapControlBehavior.PushpinImageSelectorName="StoreDataToMapPin"
										HorizontalAlignment="Stretch"
										VerticalAlignment="Stretch"
										SelectionMode="Single" />
					</xamarin:Grid>
				</DataTemplate>
			</af:WaitControl>

			<!-- GrayBackground -->
			<Rectangle x:Name="GrayBackground"
					   Fill="{StaticResource Color04Brush}"
					   HorizontalAlignment="Stretch"
					   VerticalAlignment="Stretch"
					   IsHitTestVisible="False"
					   Opacity="0"
					   Grid.RowSpan="2" />

			<Grid Margin="0,36,0,0"
				  Grid.RowSpan="2">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*" />
					<ColumnDefinition Width="60" />
				</Grid.ColumnDefinitions>

				<Grid.RowDefinitions>
					<RowDefinition Height="Auto" />
					<RowDefinition Height="Auto" />
					<RowDefinition Height="*" />
				</Grid.RowDefinitions>

				<!-- Search Box -->
				<c:TextBoxWithIcon x:Name="SearchBox"
								   x:Uid="MapPage_SearchBox"
								   PlaceholderText="Postal Code or City"
								   uloc:Localize="PlaceholderText"
								   Text="{Binding [PlacesSearchTerm], Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
								   Style="{StaticResource SearchCustomTextBoxStyle}"
								   IconPathStyle="{StaticResource SearchPathControlStyle}"
								   ue:ControlExtensions.IsAutoFocus="False"
								   ue:ControlExtensions.IsAutofocusingOnce="False"
								   b:GotFocusCommandBehaviour.Command="{Binding [ActivateSearch]}"
								   Margin="16,0,8,0" />

				<!-- Map Button -->
				<u:ActiveButton x:Name="MapButton"
								ActiveCommand="{Binding [ActivateMap]}"
								Style="{StaticResource ActiveButtonMapIconSquareStyle}"
								Visibility="Collapsed"
								Margin="0,0,16,0"
								Grid.Column="1">
					<uc:PathControl Style="{StaticResource MapPathControlStyle}" />
				</u:ActiveButton>

				<!-- Vertical top alignment and top margin are workarounds for Impediment: https://nventive.visualstudio.com/Parkland/_workitems/edit/127543 -->
				<!-- List Button -->
				<Button x:Name="ListButton"
						Style="{StaticResource ActiveButtonMapIconSquareStyle}"
						Content="Search"
						Margin="0,0,16,0"
						Grid.Column="1">
				</Button>

				<!-- Close Button -->
				<u:ActiveButton x:Name="CloseButton"
								Style="{StaticResource ActiveButtonMapIconSquareStyle}"
								Visibility="Collapsed"
								Content="Map"
								Margin="0,0,16,0"
								Grid.Column="1">
				</u:ActiveButton>

				<!-- Filter by reward banner -->
				<af:WaitControl DelayAfterLoad="0:0:0.5"
								DelayAfterDataContext="0:0:0.5"
								Grid.Row="1"
								Grid.ColumnSpan="2">

					<DataTemplate>
						<uc:AnimatedContentControl Style="{StaticResource FadeOutAnimation}"
												   IsAnimating="{Binding [IsRewardBannerVisible], Converter={StaticResource BoolToInvertBool}, FallbackValue=True}"
												   IsHitTestVisible="{Binding [IsRewardBannerVisible]}"
												   DisableOnUnload="False">

							<toolkit:ElevatedView Background="Transparent"
												  CornerRadius="6"
												  VerticalAlignment="Top"
												  Margin="16,8,16,2"
												  Elevation="2"
												  Height="56">
								<Grid>

									<!-- Background is separated because of opacity -->
									<Grid Background="{StaticResource Color04Brush}"
										  CornerRadius="6"
										  Opacity="0.9" />

									<up:StarStackPanel Orientation="Horizontal">

										<!-- Customer Reward Filter Image -->
										<Image Source="{Binding [CustomerRewardFilter].ImageUrl}"
											   Stretch="Uniform"
											   Height="40"
											   Width="40"
											   VerticalAlignment="Center"
											   Margin="12,8,12,8"
											   up:StarStackPanel.Size="Auto" />

										<!-- Customer Reward Filter Message -->
										<TextBlock Text="Showing locations for this reward"
												   x:Uid="MapPage_RewardFilter"
												   uloc:Localize="Text"
												   Style="{StaticResource Typo12}"
												   MaxLines="2"
												   VerticalAlignment="Center"
												   up:StarStackPanel.Size="*"
												   Margin="0,0,12,0" />

										<!-- Separator -->
										<Rectangle Fill="{StaticResource Color12Brush}"
												   Width="1"
												   VerticalAlignment="Stretch" />

										<!-- Clear Button -->
										<u:ActiveButton Content="Clear"
														x:Uid="MapPage_ClearRewardFilter"
														uloc:Localize="Content"
														ActiveCommand="{Binding [ClearCustomerRewardFilter]}"
														Style="{StaticResource LocationFilterActiveButtonStyle}"
														up:StarStackPanel.Size="Auto" />
									</up:StarStackPanel>
								</Grid>
							</toolkit:ElevatedView>
						</uc:AnimatedContentControl>
					</DataTemplate>
				</af:WaitControl>

				<!-- List of stores -->
				<af:WaitControl x:Name="StoresList"
								Style="{StaticResource BackgroundWaitingControlStyle}"
								Opacity="0"
								Grid.Row="2"
								Grid.ColumnSpan="2">
					<af:WaitControl.RenderTransform>
						<TranslateTransform Y="850" />
					</af:WaitControl.RenderTransform>

					<DataTemplate>
						<u:AsyncValuePresenter DataSource="{Binding [Locations]}"
											   EmptyTemplate="{StaticResource StoreListAVPEmptyTemplate}">
							<DataTemplate>
								<ListView ItemsSource="{Binding Data}"
										  ub:ActiveListViewBaseBehavior.Command="{Binding Parent[NavigateToStoreDetails]}"
										  ItemTemplate="{StaticResource StoreItemTemplate}"
										  IsItemClickEnabled="True"
										  Padding="16,0,16,76"
										  Margin="0,8,0,0" />
							</DataTemplate>
						</u:AsyncValuePresenter>
					</DataTemplate>
				</af:WaitControl>

				<!-- List of search results -->
				<af:WaitControl x:Name="SearchResults"
								Style="{StaticResource BackgroundWaitingControlStyle}"
								DelayAfterDataContext="0:0:1.2"
								IsHitTestVisible="False"
								Opacity="0"
								Grid.Row="1"
								Grid.RowSpan="2"
								Grid.ColumnSpan="2">
					<DataTemplate>
						<u:AsyncValuePresenter DataSource="{Binding [PlacesSearchResults]}"
											   EmptyTemplate="{StaticResource SearchResultsEmptyTemplate}"
											   Margin="0,8,0,0">
							<DataTemplate>
								<Grid>

									<!-- The search result will be returning into his old state when impedement #128947 will be resolved-->
									<ListView ItemsSource="{Binding Data}"
											  ub:ActiveListViewBaseBehavior.Command="{Binding Parent[UpdateSearchPlaceInput]}"
											  not_ios:FooterTemplate="{StaticResource SearchResultsFooterItemTemplate}"
											  ItemTemplate="{StaticResource SearchResultsItemTemplate}"
											  Background="{StaticResource Color04Brush}"
											  win:VerticalAlignment="Top"
											  IsItemClickEnabled="True"
											  Padding="16,0" />

									<!--
									<u:ActiveButton Content="Toggle Internet"
													HorizontalAlignment="Right"
													ActiveCommand="{Binding Parent[ToggleInternet]}" />
									-->
								</Grid>
							</DataTemplate>
						</u:AsyncValuePresenter>
					</DataTemplate>
				</af:WaitControl>
			</Grid>

			<!-- Filters and current location buttons -->
			<StackPanel x:Name="BottomButtonsPanel"
						Orientation="Horizontal"
						HorizontalAlignment="Right"
						VerticalAlignment="Bottom"
						Margin="0,0,16,16"
						Grid.Row="1">

				<StackPanel.RenderTransform>
					<TranslateTransform Y="0" />
				</StackPanel.RenderTransform>

				<!-- Filters Button -->
				<u:ActiveButton x:Name="FiltersButton"
								ActiveCommand="{Binding [NavigateToFilters]}"
								Style="{StaticResource ActiveButtonMapIconSquareStyle}">

					<u:ActiveButton.RenderTransform>
						<TranslateTransform X="0" />
					</u:ActiveButton.RenderTransform>

					<StackPanel Orientation="Horizontal">

						<!-- Filter Icon -->
						<uc:PathControl Style="{StaticResource FilterPathControlStyle}"
										VerticalAlignment="Center"
										Margin="8" />

						<!-- Number of selected filters -->
						<Grid Visibility="{Binding [SelectedFiltersCount], Converter={StaticResource CollapsedAtZero}, FallbackValue=Collapsed}"
							  Background="{StaticResource Color02Brush}"
							  Width="18"
							  Height="18"
							  CornerRadius="9"
							  VerticalAlignment="Center"
							  Margin="0,0,8,0">

							<!-- Selected Filters Count -->
							<TextBlock Text="{Binding [SelectedFiltersCount], Converter={StaticResource LimitNumberToOneDigit}}"
									   Style="{StaticResource Typo48}"
									   VerticalAlignment="Center"
									   HorizontalAlignment="Center" />
						</Grid>
					</StackPanel>
				</u:ActiveButton>

				<!-- Current Location Button -->
				<u:ActiveButton x:Name="CurrentLocationButton"
								ActiveCommand="{Binding [LocateMe]}"
								Style="{StaticResource ActiveButtonMapIconSquareStyle}"
								Margin="4,0,0,0">

					<!-- Icon -->
					<uc:PathControl Style="{StaticResource CurrentLocationPathControlStyle}"
									VerticalAlignment="Center"
									Margin="7" />
				</u:ActiveButton>
			</StackPanel>
		</Grid>

		<!-- Store details banner -->
		<u:ActiveButton x:Name="StoreSummaryBanner"
						ActiveCommand="{Binding [NavigateToCurrentStoreDetails]}"
						Style="{StaticResource ActiveButton04}"
						VerticalAlignment="Bottom"
						HorizontalAlignment="Stretch"
						Opacity="0"
						Grid.Row="0"
						Grid.RowSpan="2">

			<u:ActiveButton.RenderTransform>
				<TranslateTransform Y="19" />
			</u:ActiveButton.RenderTransform>

			<Grid Background="{StaticResource Color04Brush}"
				  Height="72">

				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="Auto" />
					<ColumnDefinition Width="*" />
				</Grid.ColumnDefinitions>

				<!-- Store Image-->
				<u:ImagePresenter ImageSource="{Binding [ActiveLocation].Store.BrandImageUrl}"
								  CornerRadius="4"
								  Height="52"
								  Width="52"
								  Margin="16,0,12,0" />

				<!-- Store Address - Distance -->
				<StackPanel up:StarStackPanel.Size="*"
							Grid.Column="1"
							VerticalAlignment="Center"
							HorizontalAlignment="Stretch">
					<TextBlock Style="{StaticResource Typo12}"
							   MaxLines="1">
						<Run Text="{Binding [ActiveLocation].Store.Address.AddressLine1}" /><Run Text="," />
					</TextBlock>

					<!-- Store Address -->
					<TextBlock Style="{StaticResource Typo12}"
							   MaxLines="1">
						<Run Text="{Binding [ActiveLocation].Store.Address.City}" /><Run Text="," />
						<Run Text="{Binding [ActiveLocation].Store.Address.StateProvince}" />
						<Run Text="{Binding [ActiveLocation].Store.Address.PostalCode}" />
					</TextBlock>

					<!-- Store Distance -->
					<TextBlock x:Name="DistanceTextBlock"
							   Visibility="{Binding [ActiveLocation].DistanceFromCurrentLocation, Converter={StaticResource NullToCollapsed}, FallbackValue=Collapsed}"
							   Style="{StaticResource Typo42}">
						<Run Text="{Binding [ActiveLocation].DistanceFromCurrentLocation}" />
						<Run Text="km" />
					</TextBlock>
				</StackPanel>

			</Grid>
		</u:ActiveButton>

		<!-- No Results or error banner -->
		<Grid x:Name="NoResultsOrErrorBanner"
			  Background="{StaticResource Color01Brush}"
			  Opacity="1"
			  Height="53"
			  VerticalAlignment="Bottom"
			  Grid.Row="0"
			  Grid.RowSpan="2">

			<Grid.RenderTransform>
				<TranslateTransform Y="0" />
			</Grid.RenderTransform>

			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*" />
				<ColumnDefinition Width="Auto" />
			</Grid.ColumnDefinitions>

			<StackPanel VerticalAlignment="Center"
						Margin="16,0">

				<!-- Title -->
				<TextBlock Text="{Binding [StoresErrorState], Converter={StaticResource FromMapErrorToTitle}}"
						   Style="{StaticResource Typo18}" />

				<!-- Message -->
				<TextBlock Text="{Binding [StoresErrorState], Converter={StaticResource FromMapErrorToMessage}}"
						   Style="{StaticResource Typo30}" />
			</StackPanel>

			<!-- Refresh Button -->
			<u:ActiveButton Visibility="{Binding [StoresErrorState], Converter={StaticResource FromMapErrorToVisible}}"
							ActiveCommand="{Binding [RefreshStores]}"
							Style="{StaticResource RefreshActiveButtonStyle}"
							HorizontalAlignment="Center"
							VerticalAlignment="Center"
							Grid.RowSpan="2"
							Grid.Column="1" />
		</Grid>

		<!-- Bottom bar -->
		<c:Menu x:Name="MenuControl"
				DataContext="{Binding [MenuViewModel]}"
				CurrentPage="Locations"
				b:ShadowBehavior.IsApplyingShadow="True"
				VerticalAlignment="Bottom"
				Grid.Row="1" />
	</Grid>
</Page>
